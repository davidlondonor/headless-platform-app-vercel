{"version":3,"file":"findPackageJSON.js","names":["cache","Map","findPackageJSON","pkgName","filename","pkgPath","isAbsolute","require","resolve","paths","dirname","has","set","findUp","sync","cwd","get","er","code","undefined"],"sources":["../src/findPackageJSON.ts"],"sourcesContent":["import { dirname, isAbsolute } from 'path';\n\nimport findUp from 'find-up';\n\nconst cache = new Map<string, string | undefined>();\n\nexport function findPackageJSON(\n  pkgName: string,\n  filename: string | null | undefined\n) {\n  try {\n    const pkgPath =\n      pkgName === '.' && filename && isAbsolute(filename)\n        ? filename\n        : require.resolve(\n            pkgName,\n            filename ? { paths: [dirname(filename)] } : {}\n          );\n    if (!cache.has(pkgPath)) {\n      cache.set(pkgPath, findUp.sync('package.json', { cwd: pkgPath }));\n    }\n\n    return cache.get(pkgPath);\n  } catch (er: unknown) {\n    if (\n      typeof er === 'object' &&\n      er !== null &&\n      (er as { code?: unknown }).code === 'MODULE_NOT_FOUND'\n    ) {\n      return undefined;\n    }\n\n    throw er;\n  }\n}\n"],"mappings":";;;;;;AAAA;AAEA;AAA6B;AAE7B,MAAMA,KAAK,GAAG,IAAIC,GAAG,EAA8B;AAE5C,SAASC,eAAe,CAC7BC,OAAe,EACfC,QAAmC,EACnC;EACA,IAAI;IACF,MAAMC,OAAO,GACXF,OAAO,KAAK,GAAG,IAAIC,QAAQ,IAAI,IAAAE,gBAAU,EAACF,QAAQ,CAAC,GAC/CA,QAAQ,GACRG,OAAO,CAACC,OAAO,CACbL,OAAO,EACPC,QAAQ,GAAG;MAAEK,KAAK,EAAE,CAAC,IAAAC,aAAO,EAACN,QAAQ,CAAC;IAAE,CAAC,GAAG,CAAC,CAAC,CAC/C;IACP,IAAI,CAACJ,KAAK,CAACW,GAAG,CAACN,OAAO,CAAC,EAAE;MACvBL,KAAK,CAACY,GAAG,CAACP,OAAO,EAAEQ,eAAM,CAACC,IAAI,CAAC,cAAc,EAAE;QAAEC,GAAG,EAAEV;MAAQ,CAAC,CAAC,CAAC;IACnE;IAEA,OAAOL,KAAK,CAACgB,GAAG,CAACX,OAAO,CAAC;EAC3B,CAAC,CAAC,OAAOY,EAAW,EAAE;IACpB,IACE,OAAOA,EAAE,KAAK,QAAQ,IACtBA,EAAE,KAAK,IAAI,IACVA,EAAE,CAAwBC,IAAI,KAAK,kBAAkB,EACtD;MACA,OAAOC,SAAS;IAClB;IAEA,MAAMF,EAAE;EACV;AACF"}